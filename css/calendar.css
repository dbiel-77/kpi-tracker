/* === Year heatmap === */
.calendar-wrap {
  /* let the calendar fill most of the viewport height */
  --vh-offset: 230px;              /* tweak if your header/controls are taller/shorter */
  min-height: calc(100vh - var(--vh-offset));
  display: grid;
  align-content: start;
}

/* grid sizing */
.calendar {
  --cell: 18px;                    /* square size */
  --gap: 4px;                      /* space between squares */
  --weeks: 53;                     /* JS updates */
  display: grid;
  grid-template-columns: 40px repeat(var(--weeks), var(--cell));
  grid-auto-rows: var(--cell);
  gap: var(--gap);
  align-items: start;
  user-select: none;
}

/* top month labels row */
.cal-months {
  grid-column: 2 / span var(--weeks);
  display: grid;
  grid-template-columns: repeat(var(--weeks), var(--cell));
  gap: var(--gap);
  margin-bottom: var(--gap);
}
.cal-months .mname {
  font-size: 12px; color: var(--muted);
}

/* left weekday labels */
.cal-wlabel {
  font-size: 12px; color: var(--muted);
  line-height: var(--cell);
  text-align: right; padding-right: 8px;
}

/* day cells */
.day {
  width: var(--cell); height: var(--cell);
  border-radius: 5px; background: #1c2330; outline: none;
  transition: transform .05s ease;
}
.day:hover { transform: translateY(-1px); }
.day:focus-visible { box-shadow: 0 0 0 2px var(--accent-2); }

/* guide line on first week of each month */
.month-start { box-shadow: inset 2px 0 0 0 color-mix(in oklab, var(--grid) 60%, transparent); }

/* highlight today */
.today {
  box-shadow: inset 0 0 0 2px var(--accent-2), 0 0 0 1px rgba(0,0,0,.25);
}

/* hover a whole week column */
.calendar.hovering-week [data-week].hover {
  outline: 1px solid color-mix(in oklab, var(--grid) 80%, transparent);
  outline-offset: -1px;
}

/* mini month totals row */
.cal-month-totals {
  grid-column: 2 / span var(--weeks);
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 8px; margin-top: 10px;
}
.cal-month-totals .bar {
  height: 10px; border-radius: 6px;
  background: color-mix(in oklab, var(--grid) 60%, transparent);
  overflow: hidden;
}
.cal-month-totals .bar > i { display:block; height:100%; background: var(--accent-2); width:0%; }

/* optional legend row (auto-built) */
.cal-legend { margin-top: 10px; display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.cal-swatch { width:14px; height:14px; border-radius:3px; display:inline-block; }
